"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7227],{37227:(e,t,n)=>{n.d(t,{X2:()=>S}),Promise.resolve(!1),Promise.resolve(!0);var r,o=Promise.resolve();function i(e,t){return e||(e=0),new Promise(function(n){return setTimeout(function(){return n(t)},e)})}function a(){return Math.random().toString(36).substring(2)}var s=0,u=0;function c(){var e=new Date().getTime();return e===s?1e3*e+ ++u:(s=e,u=0,1e3*e)}var d=function(){function e(e){this.ttl=e,this.map=new Map,this._to=!1}return e.prototype.has=function(e){return this.map.has(e)},e.prototype.add=function(e){var t=this;this.map.set(e,l()),this._to||(this._to=!0,setTimeout(function(){t._to=!1,function(e){for(var t=l()-e.ttl,n=e.map[Symbol.iterator]();;){var r=n.next().value;if(!r)return;var o=r[0];if(!(r[1]<t))return;e.map.delete(o)}}(t)},0))},e.prototype.clear=function(){this.map.clear()},e}();function l(){return new Date().getTime()}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=JSON.parse(JSON.stringify(e));return void 0===t.webWorkerSupport&&(t.webWorkerSupport=!0),t.idb||(t.idb={}),t.idb.ttl||(t.idb.ttl=45e3),t.idb.fallbackInterval||(t.idb.fallbackInterval=150),e.idb&&"function"==typeof e.idb.onclose&&(t.idb.onclose=e.idb.onclose),t.localstorage||(t.localstorage={}),t.localstorage.removeTimeout||(t.localstorage.removeTimeout=6e4),e.methods&&(t.methods=e.methods),t.node||(t.node={}),t.node.ttl||(t.node.ttl=12e4),t.node.maxParallelWrites||(t.node.maxParallelWrites=2048),void 0===t.node.useFastPath&&(t.node.useFastPath=!0),t}var m="messages",h={durability:"relaxed"};function p(){if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof window){if(void 0!==window.mozIndexedDB)return window.mozIndexedDB;if(void 0!==window.webkitIndexedDB)return window.webkitIndexedDB;if(void 0!==window.msIndexedDB)return window.msIndexedDB}return!1}function g(e){e.commit&&e.commit()}function v(e){return e.closed||!e.messagesCallback?o:(function(e,t){var n=e.transaction(m,"readonly",h),r=n.objectStore(m),o=[],i=IDBKeyRange.bound(t+1,1/0);if(r.getAll){var a=r.getAll(i);return new Promise(function(e,t){a.onerror=function(e){return t(e)},a.onsuccess=function(t){e(t.target.result)}})}return new Promise(function(e,a){var s=function(){try{return i=IDBKeyRange.bound(t+1,1/0),r.openCursor(i)}catch(e){return r.openCursor()}}();s.onerror=function(e){return a(e)},s.onsuccess=function(r){var i=r.target.result;i?i.value.id<t+1?i.continue(t+1):(o.push(i.value),i.continue()):(g(n),e(o))}})})(e.db,e.lastCursorId).then(function(t){return t.filter(function(e){return!!e}).map(function(t){return t.id>e.lastCursorId&&(e.lastCursorId=t.id),t}).filter(function(t){return!(t.uuid===e.uuid||e.eMIs.has(t.id))&&!(t.data.time<e.messagesCallbackTime)}).sort(function(e,t){return e.time-t.time}).forEach(function(t){e.messagesCallback&&(e.eMIs.add(t.id),e.messagesCallback(t.data))}),o})}function b(){var e;if("undefined"==typeof window)return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch(e){}return e}function w(e){return"pubkey.broadcastChannel-"+e}function _(){var e=b();if(!e)return!1;try{var t="__broadcastchannel_check";e.setItem(t,"works"),e.removeItem(t)}catch(e){return!1}return!0}var y=new Set,k={create:function(e){var t={name:e,messagesCallback:null};return y.add(t),t},close:function(e){y.delete(e)},onMessage:function(e,t){e.messagesCallback=t},postMessage:function(e,t){return new Promise(function(n){return setTimeout(function(){Array.from(y).filter(function(t){return t.name===e.name}).filter(function(t){return t!==e}).filter(function(e){return!!e.messagesCallback}).forEach(function(e){return e.messagesCallback(t)}),n()},5)})},canBeUsed:function(){return!0},type:"simulate",averageResponseTime:function(){return 5},microSeconds:c},C=[{create:function(e){var t={messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(e){t.messagesCallback&&t.messagesCallback(e.data)},t},close:function(e){e.bc.close(),e.subFns=[]},onMessage:function(e,t){e.messagesCallback=t},postMessage:function(e,t){try{return e.bc.postMessage(t,!1),o}catch(e){return Promise.reject(e)}},canBeUsed:function(){if("undefined"==typeof window||"function"!=typeof BroadcastChannel)return!1;if(BroadcastChannel._pubkey)throw Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0},type:"native",averageResponseTime:function(){return 150},microSeconds:c},{create:function(e,t){var n;return t=f(t),((n=p().open("pubkey.broadcast-channel-0-"+e)).onupgradeneeded=function(e){e.target.result.createObjectStore(m,{keyPath:"id",autoIncrement:!0})},new Promise(function(e,t){n.onerror=function(e){return t(e)},n.onsuccess=function(){e(n.result)}})).then(function(n){var r={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:a(),eMIs:new d(2*t.idb.ttl),writeBlockPromise:o,messagesCallback:null,readQueuePromises:[],db:n};return n.onclose=function(){r.closed=!0,t.idb.onclose&&t.idb.onclose()},function e(t){t.closed||v(t).then(function(){return i(t.options.idb.fallbackInterval)}).then(function(){return e(t)})}(r),r})},close:function(e){e.closed=!0,e.db.close()},onMessage:function(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t,v(e)},postMessage:function(e,t){return e.writeBlockPromise=e.writeBlockPromise.then(function(){var n,r,o,i;return n=e.db,r=e.uuid,o={uuid:r,time:new Date().getTime(),data:t},i=n.transaction([m],"readwrite",h),new Promise(function(e,t){i.oncomplete=function(){return e()},i.onerror=function(e){return t(e)},i.objectStore(m).add(o),g(i)})}).then(function(){var t,n,r,o,i,a;0===Math.floor(11*Math.random()+0)&&(t=e.db,n=e.options.idb.ttl,r=new Date().getTime()-n,i=(o=t.transaction(m,"readonly",h)).objectStore(m),a=[],new Promise(function(e){i.openCursor().onsuccess=function(t){var n=t.target.result;if(n){var i=n.value;i.time<r?(a.push(i),n.continue()):(g(o),e(a))}else e(a)}})).then(function(t){var n=t.map(function(e){return e.id});if(e.closed)return Promise.resolve([]);var r=e.db.transaction(m,"readwrite",h).objectStore(m);return Promise.all(n.map(function(e){var t=r.delete(e);return new Promise(function(e){t.onsuccess=function(){return e()}})}))})}),e.writeBlockPromise},canBeUsed:function(){return!!p()},type:"idb",averageResponseTime:function(e){return 2*e.idb.fallbackInterval},microSeconds:c},{create:function(e,t){if(t=f(t),!_())throw Error("BroadcastChannel: localstorage cannot be used");var n,r,o,i=a(),s=new d(t.localstorage.removeTimeout),u={channelName:e,uuid:i,eMIs:s};return n=function(e){!(!u.messagesCallback||e.uuid===i||!e.token||s.has(e.token))&&(e.data.time&&e.data.time<u.messagesCallbackTime||(s.add(e.token),u.messagesCallback(e.data)))},r=w(e),o=function(e){e.key===r&&n(JSON.parse(e.newValue))},window.addEventListener("storage",o),u.listener=o,u},close:function(e){var t;t=e.listener,window.removeEventListener("storage",t)},onMessage:function(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t},postMessage:function(e,t){return new Promise(function(n){i().then(function(){var r=w(e.channelName),o=JSON.stringify({token:a(),time:new Date().getTime(),data:t,uuid:e.uuid});b().setItem(r,o);var i=document.createEvent("Event");i.initEvent("storage",!0,!0),i.key=r,i.newValue=o,window.dispatchEvent(i),n()})})},canBeUsed:_,type:"localstorage",averageResponseTime:function(){var e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")?240:120},microSeconds:c}],P=new Set,M=0,S=function(e,t){this.id=M++,P.add(this),this.name=e,r&&(t=r),this.options=f(t),this.method=function(e){var t=[].concat(e.methods,C).filter(Boolean);if(e.type){if("simulate"===e.type)return k;var n=t.find(function(t){return t.type===e.type});if(n)return n;throw Error("method-type "+e.type+" not found")}e.webWorkerSupport||(t=t.filter(function(e){return"idb"!==e.type}));var r=t.find(function(e){return e.canBeUsed()});if(r)return r;throw Error("No usable method found in "+JSON.stringify(C.map(function(e){return e.type})))}(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,function(e){var t=e.method.create(e.name,e.options);t&&"function"==typeof t.then?(e._prepP=t,t.then(function(t){e._state=t})):e._state=t}(this)};function B(e,t,n){var r={time:e.method.microSeconds(),type:t,data:n};return(e._prepP?e._prepP:o).then(function(){var t=e.method.postMessage(e._state,r);return e._uMP.add(t),t.catch().then(function(){return e._uMP.delete(t)}),t})}function E(e){return!!(e._addEL.message.length>0)||!!(e._addEL.internal.length>0)}function I(e,t,n){e._addEL[t].push(n),function(e){if(!e._iL&&E(e)){var t=function(t){e._addEL[t.type].forEach(function(e){var n=e.time-1e5;t.time>=n&&e.fn(t.data)})},n=e.method.microSeconds();e._prepP?e._prepP.then(function(){e._iL=!0,e.method.onMessage(e._state,t,n)}):(e._iL=!0,e.method.onMessage(e._state,t,n))}}(e)}function L(e,t,n){e._addEL[t]=e._addEL[t].filter(function(e){return e!==n}),function(e){if(e._iL&&!E(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}(e)}S._pubkey=!0,S.prototype={postMessage:function(e){if(this.closed)throw Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed "+JSON.stringify(e));return B(this,"message",e)},postInternal:function(e){return B(this,"internal",e)},set onmessage(fn){var T={time:this.method.microSeconds(),fn:fn};L(this,"message",this._onML),fn&&"function"==typeof fn?(this._onML=T,I(this,"message",T)):this._onML=null},addEventListener:function(e,t){I(this,e,{time:this.method.microSeconds(),fn:t})},removeEventListener:function(e,t){var n=this._addEL[e].find(function(e){return e.fn===t});L(this,e,n)},close:function(){var e=this;if(!this.closed){P.delete(this),this.closed=!0;var t=this._prepP?this._prepP:o;return this._onML=null,this._addEL.message=[],t.then(function(){return Promise.all(Array.from(e._uMP))}).then(function(){return Promise.all(e._befC.map(function(e){return e()}))}).then(function(){return e.method.close(e._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};var D=n(65364),x=n(65364),N=(Object.prototype.toString.call(void 0!==x?x:0),new Set)}}]);